function validatePlate(a){var b=new RegExp("^[0-9]{4}-?[A-Z]{3}$|^[A-Z]{1,2}-?[0-9]{4}-?[A-Z]{1,2}$","i");return b.test(a)}function Car(a,b,c,d,e){this.model=a,this.numberPlate=b,this.lastRevDate=c,this.buyPrice=d,this.sellPrice=e}function Dealership(a){this.zone=a,this.stock=[]}function validateModel(a){return globals.MODELS.some(function(b){return a===b})}function validatePrice(a){return a>0}function validateDate(a){var b,c=+(a[0]+a[1]),d=a[2]+a[3]+a[4],d=d.toLowerCase(),e=+(a[5]+a[6]+a[7]+a[8]),f=+(globals.MONTHS.indexOf(d.toLowerCase())/3),g=new Date,h=new Date(e,f,c),i=new RegExp("^[0-9]{2}[A-Z]{3}[0-9]{4}$","i"),j=31>=c&&c>0,k=globals.MONTHS.indexOf(d)%3,l=e>0;return b=i.test(a)&&j&&!k&&l&&g>h?!0:!1}function DealersNet(){this.Dealers=globals.ZONE.map(function(a){return new Dealership(a)})}var globals=function(a){return a.ZONE=["Norte","Sur","Este","Oeste"],a.MODELS=["Basic","Homing","Transper","BerlinX","MaximV8"],a.PROPERTIES=["model","numberPlate","lastRevDate","buyPrice","sellPrice"],a.MONTHS="janfebmaraprmayjunjulaugsepoctnovdec",a}({});Dealership.prototype.validateData=function(a){var b=[validateModel,validatePlate,validateDate,validatePrice,validatePrice];return a.every(function(a,b){return this[b](a)},b)},Dealership.prototype.buyCar=function(a,b,c,d,e){this.stock.push(new Car(a,b.replace(/-/g,""),c,d,e))},Dealership.prototype.sellCar=function(a){this.stock=this.stock.filter(function(b){return b.numberPlate!==a?b:void 0})},Dealership.prototype.findNumberPlate=function(a){return this.stock.some(function(b){return b.numberPlate===a})},Dealership.prototype.sellProfits=function(){return 0!==this.stock.length?this.stock.map(function(a){return a.sellPrice-a.buyPrice}).reduce(function(a,b){return a+b})+" â‚¬":"No hay coches en stock"},DealersNet.prototype.validNumberPlate=function(a){return this.Dealers.some(function(b){return b.findNumberPlate(a)})};var net=new DealersNet;