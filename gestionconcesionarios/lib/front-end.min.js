"use strict";function $(a){return document.getElementById(a)}function mountPage(){var a=document.createElement("select"),b=1,c=document.createElement("button");c.id="buy",c.innerHTML="Buy car",a.id="selectDealer",globals.ZONE.forEach(function(c){var d=document.createElement("option");d.value=c,d.id=b,d.innerHTML=c,a.appendChild(d),b+=1}),$("page").appendChild(a),$("page").appendChild(c),createTable()}function buyForm(){reset(),$("buy").innerHTML="Clean";var a=document.createElement("form"),b=Object.keys(new Car),c=document.createElement("select"),d=document.createElement("button");c.id="FilterSelect",c.setAttribute("class","inputProperties"),d.id="buyFormButton",d.innerHTML="Buy",a.id="form",a.appendChild(c),globals.MODELS.forEach(function(a){var b=document.createElement("option");b.innerHTML=a,b.value=a,c.appendChild(b)}),b.forEach(function(b){var c=document.createElement("input");c.setAttribute("type","text"),c.id=b,c.setAttribute("class","inputProperties"),c.setAttribute("placeholder",b),a.appendChild(c)}),a.appendChild(d),$("page").appendChild(a),$("form").removeChild($("model")),$("buyFormButton").addEventListener("click",buyCar,!1)}function buyCar(){var a=document.getElementsByClassName("inputProperties"),b=ObjectFromSelect(),c=globals.PROPERTIES.map(function(a,b){return this[b].value},a),d=c[1];b.validateData(c)&&net.validNumberPlate(d)?(b.buyCar.apply(b,c),createTable()):(buyForm(),alert("alaaaaaa"))}function reset(){null!==$("tabla")&&($("page").removeChild($("tabla")),$("page").removeChild($("sell"))),null!==$("form")&&$("page").removeChild($("form")),null!==$("FilterSelect")&&$("page").removeChild($("FilterSelect"))}function getData(){mountPage(),$("selectDealer").addEventListener("change",createTable,!1),$("buy").addEventListener("click",buyForm,!1)}function ObjectFromSelect(){var a=$("selectDealer").selectedIndex;return net.Dealers[a]}function getCarProperties(a){var b;return b=0!==a.stock.length?a.stock.map(function(a){return[a.model,a.numberPlate,a.lastRevDate,a.buyPrice,a.sellPrice]}):[]}function sellSelectedCars(){var a=ObjectFromSelect(),b=document.getElementsByTagName("input"),c=b.length,d=Array.apply(null,Array(c)),e=Object.keys(d);e.forEach(function(c){c=+c,b[c].checked&&a.sellCar(b[c].id)}),createTable()}function createTable(){reset(),$("buy").innerHTML="Buy car";var a,b,c,d=document.createElement("table"),e=document.createElement("select"),f=(document.createElement("th"),document.createElement("option")),g=Object.keys(new Car),h=ObjectFromSelect(),i=document.createElement("button");Object.keys(new Car).reverse();f.innerHTML="Todos",f.id="todos",e.appendChild(f),globals.MODELS.forEach(function(a){var b=document.createElement("option");b.innerHTML=a,b.value=a,e.appendChild(b)}),e.id="FilterSelect",i.id="sell",i.innerHTML="Sell car",d.id="tabla",a=d.appendChild(document.createElement("tr")),b=a.appendChild(document.createElement("th")),b.appendChild(document.createTextNode("selected")),g.forEach(function(c){b=a.appendChild(document.createElement("th")),b.appendChild(document.createTextNode(c))});var j=getCarProperties(h);j.map(function(e){a=d.appendChild(document.createElement("tr")),b=a.appendChild(document.createElement("td")),c=b.appendChild(document.createElement("input")),c.setAttribute("type","checkbox"),c.id=e[1],e.map(function(c){b=a.appendChild(document.createElement("td")),b.appendChild(document.createTextNode(c))})}),$("page").appendChild(e),$("page").appendChild(d),$("page").appendChild(i),$("sell").addEventListener("click",sellSelectedCars,!1)}window.onload=getData;