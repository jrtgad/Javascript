"use strict";function $(a){return document.getElementById(a)}function objectFromSelect(){var a=$("selectDealer").selectedIndex;return net.Dealers[a]}function reset(){null!==$("tabla")&&($("page").removeChild($("tabla")),$("page").removeChild($("sell"))),null!==$("form")&&$("page").removeChild($("form")),null!==$("error")&&$("page").removeChild($("error")),null!==$("divProfits")&&$("page").removeChild($("divProfits")),null!==$("parprofits")&&$("page").removeChild($("parprofits")),null!==$("FilterSelect")&&$("page").removeChild($("FilterSelect"))}function insertData(a){for(var b,c,d;void 0!==$("tabla").children[1];)$("tabla").removeChild($("tabla").children[1]);a.map(function(a){c=$("tabla").appendChild(document.createElement("tr")),d=c.appendChild(document.createElement("td")),b=d.appendChild(document.createElement("input")),b.setAttribute("type","checkbox"),b.id=a[1],a.map(function(a){d=c.appendChild(document.createElement("td")),d.appendChild(document.createTextNode(a))})})}function getModelSelect(){var a=document.createElement("select"),b=document.createElement("option");a.id="FilterSelect",b.innerHTML="Todos",b.id="todos",a.appendChild(b),globals.MODELS.forEach(function(b){var c=document.createElement("option");c.innerHTML=b,c.value=b,a.appendChild(c)}),$("page").appendChild(a),$("FilterSelect").addEventListener("change",filterCars,!1)}function simulateSoldCars(){var a=objectFromSelect();$("parprofits").innerHTML=a.sellProfits()}function sellSelectedCars(){var a=objectFromSelect(),b=document.getElementsByTagName("input"),c=Array.apply(null,new Array(b.length)),d=Object.keys(c);d.forEach(function(c){c=+c,b[c].checked&&a.sellCar(b[c].id)}),createTable()}function mountPage(){var a=document.createElement("select"),b=document.createElement("button"),c=1;b.id="buy",b.innerHTML="Buy car",a.id="selectDealer",globals.ZONE.forEach(function(b){var d=document.createElement("option");d.value=b,d.id=c,d.innerHTML=b,a.appendChild(d),c+=1}),$("page").appendChild(a),$("page").appendChild(b),createTable()}var getCarProperties=function(a,b){var c=a.stock.map(function(a){return"Todos"===b?[a.model,a.numberPlate,a.lastRevDate,a.buyPrice,a.sellPrice]:b===a.model?[a.model,a.numberPlate,a.lastRevDate,a.buyPrice,a.sellPrice]:void 0}).filter(function(a){return void 0!==a});insertData(c)},buyCar=function(){var a,b=document.getElementsByClassName("inputProperties"),c=objectFromSelect(),d=globals.PROPERTIES.map(function(a,b){return this[b].value},b),e=d[1].replace(/-/g,"");c.validateData(d)&&!net.validNumberPlate(e)?(c.buyCar.apply(c,d),createTable()):(a=document.createElement("p"),a.id="error",a.appendChild(document.createTextNode("Datos incorrectos")),buyForm(),$("page").appendChild(a))},buyForm=function(){reset(),$("buy").innerHTML="Clean";var a=document.createElement("form"),b=Object.keys(new Car),c=document.createElement("select"),d=document.createElement("button");c.id="FilterSelect",c.setAttribute("class","inputProperties"),d.id="buyFormButton",d.innerHTML="Buy",a.id="form",a.appendChild(c),globals.MODELS.forEach(function(a){var b=document.createElement("option");b.innerHTML=a,b.value=a,c.appendChild(b)}),b.forEach(function(b){var c=document.createElement("input");c.setAttribute("type","text"),c.id=b,c.setAttribute("class","inputProperties"),c.setAttribute("placeholder",b),a.appendChild(c)}),a.appendChild(d),$("page").appendChild(a),$("form").removeChild($("model")),$("buyFormButton").addEventListener("click",buyCar,!1)},filterCars=function(){var a=objectFromSelect(),b=$("FilterSelect").value;getCarProperties(a,b)},getSimulateProfitsButton=function(){var a=document.createElement("button"),b=document.createElement("div"),c=document.createElement("p");b.id="divProfits",c.id="parprofits",a.id="buttonprofits",a.value="Simular  venta de stock",a.innerHTML="Simular  venta de stock",b.appendChild(a),b.appendChild(c),$("page").appendChild(b),a.addEventListener("click",simulateSoldCars,!1)},createTable=function(){reset(),$("buy").innerHTML="Buy car";var a,b,c=document.createElement("table"),d=Object.keys(new Car),e=document.createElement("button");e.id="sell",e.innerHTML="Sell car",c.id="tabla",a=c.appendChild(document.createElement("tr")),b=a.appendChild(document.createElement("th")),b.appendChild(document.createTextNode("selected")),d.forEach(function(c){b=a.appendChild(document.createElement("th")),b.appendChild(document.createTextNode(c))}),getSimulateProfitsButton(),$("page").appendChild(c),getModelSelect(),$("page").appendChild(e),filterCars(),$("sell").addEventListener("click",sellSelectedCars,!1)};window.onload=function(){mountPage(),$("selectDealer").addEventListener("change",createTable,!1),$("buy").addEventListener("click",buyForm,!1)};